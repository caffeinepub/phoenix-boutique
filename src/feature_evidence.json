{
  "kind": "feature_evidence_report",
  "features": [
    {
      "featureId": "feature-implement-a-firestore-audit-logging-service-that-writes-documents-to-the-auditlogs-collection-for-these-actions-order-created-order-updated-payment-updated-order-deleted-each-log-entry-must-include-action-string-enum-orderid-use-the-human-facing-order-orderid-localid-when-available-actor-userid-actor-role-timestamp-and-a-small-details-object-for-action-specific-metadata-e-g-payment-amount-mode-for-payment-updates-logging-must-be-best-effort-and-must-not-break-offline-first-behavior-if-firebase-firestore-is-not-configured-or-the-user-is-not-authenticated-the-app-must-continue-normally-and-the-audit-write-must-be-skipped-with-a-safe-error-message-no-crashes",
      "featureTitle": "Implement a Firestore audit logging service that writes documents to the `/auditLogs` collection for these actions: Order created, Order updated, Payment updated, Order deleted. Each log entry must include: action (string enum), orderId (use the human-facing `order.orderId`), localId when available, actor userId, actor role, timestamp, and a small `details` object for action-specific metadata (e.g., payment amount/mode for payment updates). Logging must be best-effort and must not break offline-first behavior: if Firebase/Firestore is not configured or the user is not authenticated, the app must continue normally and the audit write must be skipped with a safe error message (no crashes).",
      "files": [
        "frontend/src/firebase/auditLogs.ts"
      ],
      "components": [
        "core-infrastructure@1.0.2",
        "shadcn-ui@1.0.0",
        "build-template-react@1.0.0",
        "initial-app@1.0.0",
        "github-export-icp-cli@1.0.0"
      ],
      "testIds": [
        "REQ-77"
      ],
      "confidence": "high"
    },
    {
      "featureId": "feature-wire-audit-logging-calls-into-the-existing-app-flows-so-the-correct-audit-action-is-recorded-at-the-time-the-action-occurs-1-after-a-successful-local-order-creation-2-after-a-successful-local-order-update-including-edits-3-after-a-successful-payment-update-from-the-update-payment-dialog-and-4-after-a-successful-order-delete-use-the-currently-authenticated-firebase-user-uid-and-current-role-state-when-available-do-not-introduce-any-new-authentication-requirements-for-core-app-usage",
      "featureTitle": "Wire audit logging calls into the existing app flows so the correct audit action is recorded at the time the action occurs: (1) after a successful local order creation, (2) after a successful local order update (including edits), (3) after a successful payment update (from the Update Payment dialog), and (4) after a successful order delete. Use the currently authenticated Firebase user (uid) and current role state when available; do not introduce any new authentication requirements for core app usage.",
      "files": [
        "frontend/src/screens/EditOrderScreen.tsx",
        "frontend/src/screens/NewOrderScreen.tsx",
        "frontend/src/screens/OrderDetailsScreen.tsx",
        "frontend/src/screens/UpdatePaymentDialog.tsx"
      ],
      "components": [
        "core-infrastructure@1.0.2",
        "shadcn-ui@1.0.0",
        "build-template-react@1.0.0",
        "initial-app@1.0.0",
        "github-export-icp-cli@1.0.0"
      ],
      "testIds": [
        "REQ-78"
      ],
      "confidence": "high"
    },
    {
      "featureId": "feature-add-an-admin-only-audit-logs-screen-that-lists-recent-audit-log-entries-from-firestore-auditlogs-in-reverse-chronological-order-newest-first-with-clear-english-labels-and-formatting-the-screen-must-be-fully-inaccessible-to-staff-it-must-be-hidden-from-staff-navigation-entry-points-and-must-show-an-access-denied-screen-if-a-staff-user-reaches-the-route-indirectly-include-at-minimum-action-label-orderid-actor-userid-or-email-if-readily-available-from-auth-state-and-timestamp",
      "featureTitle": "Add an ADMIN-only Audit Logs screen that lists recent audit log entries from Firestore `/auditLogs` in reverse chronological order (newest first), with clear English labels and formatting. The screen must be fully inaccessible to STAFF: it must be hidden from STAFF navigation entry points and must show an access denied screen if a STAFF user reaches the route indirectly. Include at minimum: action label, orderId, actor userId (or email if readily available from auth state), and timestamp.",
      "files": [
        "frontend/src/firebase/auditLogs.ts",
        "frontend/src/layout/AppShell.tsx",
        "frontend/src/screens/AuditLogsScreen.tsx"
      ],
      "components": [
        "core-infrastructure@1.0.2",
        "shadcn-ui@1.0.0",
        "build-template-react@1.0.0",
        "initial-app@1.0.0",
        "github-export-icp-cli@1.0.0"
      ],
      "testIds": [
        "REQ-79"
      ],
      "confidence": "high"
    },
    {
      "featureId": "feature-integrate-the-audit-logs-screen-into-the-existing-in-app-navigation-for-admin-users-by-adding-an-entry-point-in-the-reports-screen-and-adding-a-new-navigation-route-screen-key-handled-by-the-app-shell-routing-do-not-modify-any-immutable-frontend-paths",
      "featureTitle": "Integrate the Audit Logs screen into the existing in-app navigation for ADMIN users by adding an entry point in the Reports screen and adding a new navigation route/screen key handled by the app shell routing. Do not modify any immutable frontend paths.",
      "files": [
        "frontend/src/layout/AppShell.tsx",
        "frontend/src/navigation/NavigationProvider.tsx",
        "frontend/src/screens/ReportsScreen.tsx"
      ],
      "components": [
        "core-infrastructure@1.0.2",
        "shadcn-ui@1.0.0",
        "build-template-react@1.0.0",
        "initial-app@1.0.0",
        "github-export-icp-cli@1.0.0"
      ],
      "testIds": [
        "REQ-80"
      ],
      "confidence": "high"
    },
    {
      "featureId": "feature-add-concise-documentation-for-required-firestore-security-rules-for-auditlogs-so-that-only-admin-can-read-logs-while-authenticated-users-can-write-logs-place-the-snippet-in-an-existing-firebase-setup-doc-e-g-frontend-firebase-setup-md-and-keep-it-in-english",
      "featureTitle": "Add concise documentation for required Firestore security rules for `/auditLogs` so that only ADMIN can read logs while authenticated users can write logs. Place the snippet in an existing Firebase setup doc (e.g., `frontend/FIREBASE_SETUP.md`) and keep it in English.",
      "files": [
        "frontend/FIREBASE_SETUP.md"
      ],
      "components": [
        "core-infrastructure@1.0.2",
        "shadcn-ui@1.0.0",
        "build-template-react@1.0.0",
        "initial-app@1.0.0",
        "github-export-icp-cli@1.0.0"
      ],
      "testIds": [
        "REQ-81"
      ],
      "confidence": "high"
    }
  ]
}